<!doctype html><html dir=ltr lang=en data-theme class=html><head><title>Eugene Khvedchenya
|
Building OpenCV for iPhone in one click</title><meta charset=utf-8><meta name=generator content="Hugo 0.98.0"><meta name=viewport content="width=device-width,initial-scale=1,viewport-fit=cover"><meta name=author content="Eugene Khvedchenya"><meta name=description content="A personal blog about Computer Vision, AI, Kaggle, Open-Source and research. You will never read this in books."><link rel=stylesheet href=/scss/main.min.b2e0cb07595e3519ab1193bb421914e06c0e26b0cc561fef23b3c6131d4d2ffa.css integrity="sha256-suDLB1leNRmrEZO7QhkU4GwOJrDMVh/vI7PGEx1NL/o=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/css/markupHighlight.min.31b0a1f317f55c529a460897848c97436bb138b19c399b37de70d463a8bf6ed5.css integrity="sha256-MbCh8xf1XFKaRgiXhIyXQ2uxOLGcOZs33nDUY6i/btU=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/fontawesome.min.7d272de35b410fb165377550cdf9c4d3a80fbbcc961e111914e4d5c0eaf5729f.css integrity="sha256-fSct41tBD7FlN3VQzfnE06gPu8yWHhEZFOTVwOr1cp8=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/solid.min.55d8333481b07a08e07cf6f37319753a2b47e99f4c395394c5747b48b495aa9b.css integrity="sha256-VdgzNIGwegjgfPbzcxl1OitH6Z9MOVOUxXR7SLSVqps=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/regular.min.a7448d02590b43449364b6b5922ed9af5410abb4de4238412a830316dedb850b.css integrity="sha256-p0SNAlkLQ0STZLa1ki7Zr1QQq7TeQjhBKoMDFt7bhQs=" crossorigin=anonymous type=text/css><link rel=stylesheet href=/fontawesome/css/brands.min.9ed75a5d670c953fe4df935937674b4646f92674367e9e66eb995bb04e821647.css integrity="sha256-ntdaXWcMlT/k35NZN2dLRkb5JnQ2fp5m65lbsE6CFkc=" crossorigin=anonymous type=text/css><link rel="shortcut icon" href=/favicon.ico type=image/x-icon><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=canonical href=https://computer-vision-talks.com/post/2011-02-25-building-opencv-for-iphone-in-one-click/><script type=text/javascript src=/js/anatole-header.min.f9132794301a01ff16550ed66763482bd848f62243d278f5e550229a158bfd32.js integrity="sha256-+RMnlDAaAf8WVQ7WZ2NIK9hI9iJD0nj15VAimhWL/TI=" crossorigin=anonymous></script>
<script type=text/javascript src=/js/anatole-theme-switcher.min.560a26330d27ff44a44e83b53cd07a95d4230a65930d31c5c76a8d481e5b35bf.js integrity="sha256-VgomMw0n/0SkToO1PNB6ldQjCmWTDTHFx2qNSB5bNb8=" crossorigin=anonymous></script><meta name=twitter:card content="summary"><meta name=twitter:title content="Building OpenCV for iPhone in one click"><meta name=twitter:description content="My first post in this blog was about building OpenCV for iOS devices (iPhone, iPad, iPod and so on). But the build process that i used is not trivial at all. I received a lot of feedbacks and questions about building OpenCV, setting up XCode build environment. Today i made your life much easier. I have a gift - a build script, which will **build OpenCV **library for your iPhone, iPad, iPod or any other iOS based Apple device right in one click!"><meta property="og:title" content="Building OpenCV for iPhone in one click"><meta property="og:description" content="My first post in this blog was about building OpenCV for iOS devices (iPhone, iPad, iPod and so on). But the build process that i used is not trivial at all. I received a lot of feedbacks and questions about building OpenCV, setting up XCode build environment. Today i made your life much easier. I have a gift - a build script, which will **build OpenCV **library for your iPhone, iPad, iPod or any other iOS based Apple device right in one click!"><meta property="og:type" content="article"><meta property="og:url" content="https://computer-vision-talks.com/post/2011-02-25-building-opencv-for-iphone-in-one-click/"><meta property="article:section" content="post"><meta property="article:published_time" content="2011-02-25T00:00:00+00:00"><meta property="article:modified_time" content="2011-02-25T00:00:00+00:00"><meta property="og:site_name" content="Computer Vision Talks"><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","articleSection":"post","name":"Building OpenCV for iPhone in one click","headline":"Building OpenCV for iPhone in one click","alternativeHeadline":"","description":"
      
        My first post in this blog was about building OpenCV for iOS devices (iPhone, iPad, iPod and so on). But the build process that i used is not trivial at all. I received a lot of feedbacks and questions about building OpenCV, setting up XCode build environment. Today i made your life much easier. I have a gift - a build script, which will **build OpenCV **library for your iPhone, iPad, iPod or any other iOS based Apple device right in one click!


      


    ","inLanguage":"en-us","isFamilyFriendly":"true","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/computer-vision-talks.com\/post\/2011-02-25-building-opencv-for-iphone-in-one-click\/"},"author":{"@type":"Person","name":"Eugene Khvedchenya"},"creator":{"@type":"Person","name":"Eugene Khvedchenya"},"accountablePerson":{"@type":"Person","name":"Eugene Khvedchenya"},"copyrightHolder":{"@type":"Person","name":"Eugene Khvedchenya"},"copyrightYear":"2011","dateCreated":"2011-02-25T00:00:00.00Z","datePublished":"2011-02-25T00:00:00.00Z","dateModified":"2011-02-25T00:00:00.00Z","publisher":{"@type":"Organization","name":"Eugene Khvedchenya","url":"https://computer-vision-talks.com/","logo":{"@type":"ImageObject","url":"https:\/\/computer-vision-talks.com\/favicon-32x32.png","width":"32","height":"32"}},"image":[],"url":"https:\/\/computer-vision-talks.com\/post\/2011-02-25-building-opencv-for-iphone-in-one-click\/","wordCount":"828","genre":[],"keywords":["tutorials","opencv","xcode"]}</script></head><body class="body theme--light"><div class=wrapper><aside class=wrapper__sidebar><div class="sidebar
animated fadeInDown"><div class=sidebar__content><div class=sidebar__introduction><img class=sidebar__introduction-profileimage src=/images/4ECfkGJr_400x400.jpg alt="profile picture"><div class=sidebar__introduction-title><a href=/>Computer Vision Talks</a></div><div class=sidebar__introduction-description><p>A personal blog about Computer Vision, AI, Kaggle, Open-Source and research. You will never read this in books.</p></div></div><ul class=sidebar__list><li class=sidebar__list-item><a href=https://www.linkedin.com/in/cvtalks/ target=_blank rel=noopener aria-label=Linkedin title=Linkedin><i class="fab fa-linkedin fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://twitter.com/cvtalks target=_blank rel=noopener aria-label=Twitter title=Twitter><i class="fab fa-twitter fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=https://github.com/BloodAxe target=_blank rel=noopener aria-label=GitHub title=GitHub><i class="fab fa-github fa-2x" aria-hidden=true></i></a></li><li class=sidebar__list-item><a href=mailto:ekhvedchenya@computer-vision-talks.com target=_blank rel=noopener aria-label=E-Mail title=E-Mail><i class="fas fa-envelope fa-2x" aria-hidden=true></i></a></li></ul></div><footer class="footer footer__sidebar"><ul class=footer__list><li class=footer__item>&copy;
Eugene Khvedchenya
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.9c062c557275acbaba71f0c7cd4024da3e3cc825d248bc4b2130811b0965330b.js integrity="sha256-nAYsVXJ1rLq6cfDHzUAk2j48yCXSSLxLITCBGwllMws=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-10687369-5","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></div></aside><main class=wrapper__main><header class=header><div class="animated fadeInDown"><a role=button class=navbar-burger data-target=navMenu aria-label=menu aria-expanded=false><span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span>
<span aria-hidden=true class=navbar-burger__line></span></a><nav class=nav><ul class=nav__list id=navMenu><li class=nav__list-item><a href=/ title>Home</a></li><li class=nav__list-item><a href=/post/ title>Posts</a></li><li class=nav__list-item><a href=/open-source title>Open-Source</a></li><li class=nav__list-item><a href=/challenges title>Wins</a></li><li class=nav__list-item><a href=/publications title>Publications</a></li></ul><ul class="nav__list nav__list--end"><li class=nav__list-item><div class=themeswitch><a title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></li></ul></nav></div></header><div class="post
animated fadeInDown"><div class=post__content><h1>Building OpenCV for IPhone in One Click</h1><ul class=post__meta><li class=post__meta-item><em class="fas fa-calendar-day post__meta-icon"></em>
<span class=post__meta-text>Fri, Feb 25, 2011</span></li><li class=post__meta-item><em class="fas fa-stopwatch post__meta-icon"></em>
<span class=post__meta-text>4-minute read</span></li></ul><p><img src=build-opencv-script_thumb2.png alt=build-opencv-script title=build-opencv-script><br>My first post in this blog was about building OpenCV for iOS devices (iPhone, iPad, iPod and so on). But the build process that i used is not trivial at all. I received a lot of feedbacks and questions about building OpenCV, setting up XCode build environment. Today i made your life much easier. I have a gift - a build script, which will **build OpenCV **library for your iPhone, iPad, iPod or any other iOS based Apple device right <strong>in one click</strong>! <strong>Update = Now build script supports XCode 4 and iOS 4.3 SDK</strong> Sounds cool, yeah? Well, It&rsquo;s all true. Actually, my script does exactly the same things as i mentioned in original article. But without user interaction.</p><p></p><h2 id=lets-build-it>Let&rsquo;s build it!</h2><p>We start, as usual, from getting a fresh source code from OpenCV repository:</p><pre><code>svn co http://code.opencv.org/svn/opencv/trunk
</code></pre><p>Or, if you already have checked out in the past, run svn update command:</p><pre><code>svn update
</code></pre><p>To start build process you should call build script with two required arguments: directory, where OpenCV sources located and directory, where libraries and headers will be places:</p><pre><code>sh BuildOpenCV.sh trunk/opencv/ opencv_ios_build
</code></pre><p>Hit Enter and take a rest - it will take 5-10 minutes. There will be compilation errors. Something like:</p><pre><code>The following build commands failed:
opencv_highgui:
CompileC cap_qtkit.o cap_qtkit.mm normal armv7 objective-c++ com.apple.compilers.gcc.4_2
opencv_ts:
CompileC ts_gtest.o ts_gtest.cpp normal armv7 c++ com.apple.compilers.gcc.4_2
(2 failures)
</code></pre><p>It&rsquo;s okay. For now, OpenCV has to official iOS support, so some parts of code will cause compilation errors (highgui module). Maybe in future this will change, but ignore them now. If you are getting other errors, it looks like either you doing something wrong, or repository build is broken. When all is done, your build directory should looks like this:</p><pre><code>   opencv_build_ios_4771
   |-include
   |---opencv
   |---opencv2
   |-----calib3d
   |-----contrib
   |-----core
   |-----features2d
   |-----flann
   |-----highgui
   |-----imgproc
   |-----legacy
   |-----ml
   |-----objdetect
   |-----ts
   |-----video
   |-lib
   |---Release-iphonesimulator
   |---debug-iphoneos
   |---debug-iphonesimulator
   |---debug-universal
   |---release-iphoneos
   |---release-universal
</code></pre><p>Lib folder contains all necessary static libraries, Include - OpenCV headers.</p><h2 id=how-it-works>How it works</h2><ol><li>Configure OpenCV using CMake. I disabled enabled by default options like SSE, SSE2, support of video input libraries, because they are not actual for iOS</li><li>Run batch build process from command line using xcodebuild tool. With their help we build all necessary libs.</li><li>Copy libraries to appropriate directories and create universal ones.</li><li>Run Install target to get OpenCV headers.</li></ol><h2 id=script-source>Script source</h2><p>Here is script listing. Don&rsquo;t start copy&pasting it, there are download link at the end of the post.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>    <span class=c1>#!/bin/bash</span>
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    <span class=c1># This script will create universal binaries for OpenCV library for</span>
</span></span><span class=line><span class=cl>    <span class=c1># iOS-based devices (iPhone, iPad, iPod, etc).</span>
</span></span><span class=line><span class=cl>    <span class=c1># As output you obtain debug/release static libraries and include headers.</span>
</span></span><span class=line><span class=cl>    <span class=c1>#</span>
</span></span><span class=line><span class=cl>    <span class=c1># This script was written by Eugene Khvedchenya</span>
</span></span><span class=line><span class=cl>    <span class=c1># And distributed under GPL license</span>
</span></span><span class=line><span class=cl>    <span class=c1># Support site: http://computer-vision-talks.com</span>
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>[</span> <span class=nv>$#</span> -ne <span class=m>2</span> <span class=o>]</span>
</span></span><span class=line><span class=cl>    <span class=k>then</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Error in </span><span class=nv>$0</span><span class=s2> - Invalid Argument Count&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;Syntax: </span><span class=nv>$0</span><span class=s2> [OpenCV source directory] [Build destination directory]&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>echo</span> <span class=s2>&#34;If the destination directory already exists, it will be overwritten!&#34;</span>
</span></span><span class=line><span class=cl>        <span class=nb>exit</span>
</span></span><span class=line><span class=cl>    <span class=k>fi</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Absolute path to the source code directory.</span>
</span></span><span class=line><span class=cl>    <span class=nv>D</span><span class=o>=</span><span class=sb>`</span>dirname <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>    <span class=nv>B</span><span class=o>=</span><span class=sb>`</span>basename <span class=s2>&#34;</span><span class=nv>$1</span><span class=s2>&#34;</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>    <span class=nv>SRC</span><span class=o>=</span><span class=s2>&#34;`cd \&#34;</span><span class=nv>$D</span><span class=s2>\&#34; 2&gt;/dev/null &amp;&amp; pwd || echo \&#34;</span><span class=nv>$D</span><span class=s2>\&#34;`/</span><span class=nv>$B</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1># Absolute path to the build directory.</span>
</span></span><span class=line><span class=cl>    <span class=nv>D</span><span class=o>=</span><span class=sb>`</span>dirname <span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>    <span class=nv>B</span><span class=o>=</span><span class=sb>`</span>basename <span class=s2>&#34;</span><span class=nv>$2</span><span class=s2>&#34;</span><span class=sb>`</span>
</span></span><span class=line><span class=cl>    <span class=nv>BUILD</span><span class=o>=</span><span class=s2>&#34;`cd \&#34;</span><span class=nv>$D</span><span class=s2>\&#34; 2&gt;/dev/null &amp;&amp; pwd || echo \&#34;</span><span class=nv>$D</span><span class=s2>\&#34;`/</span><span class=nv>$B</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nv>INTERMEDIATE</span><span class=o>=</span><span class=nv>$BUILD</span>/tmp
</span></span><span class=line><span class=cl>    <span class=nv>IOS_INSTALL_DIR</span><span class=o>=</span><span class=nv>$INTERMEDIATE</span>/ios-install
</span></span><span class=line><span class=cl>    <span class=nv>MAC_INSTALL_DIR</span><span class=o>=</span><span class=nv>$INTERMEDIATE</span>/mac-install
</span></span><span class=line><span class=cl>    <span class=nv>PATCHED_SRC_DIR</span><span class=o>=</span><span class=nv>$INTERMEDIATE</span>/ios-sources-patched
</span></span><span class=line><span class=cl>    <span class=nv>IOS_BUILD_DIR</span><span class=o>=</span><span class=nv>$INTERMEDIATE</span>/ios-build
</span></span><span class=line><span class=cl>    <span class=nv>MAC_BUILD_DIR</span><span class=o>=</span><span class=nv>$INTERMEDIATE</span>/mac-build
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;OpenCV source   :&#34;</span> <span class=nv>$SRC</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Build directory :&#34;</span> <span class=nv>$BUILD</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Intermediate dir:&#34;</span> <span class=nv>$INTERMEDIATE</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Patched source  :&#34;</span> <span class=nv>$PATCHED_SRC_DIR</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nv>OPENCV_MODULES_TO_BUILD</span><span class=o>=(</span>zlib libjpeg libpng libtiff libjasper opencv_lapack opencv_calib3d opencv_core opencv_features2d opencv_flann opencv_imgproc opencv_legacy opencv_contrib opencv_ml opencv_objdetect opencv_video<span class=o>)</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    <span class=c1># Clear the old build and recompile the new one.</span>
</span></span><span class=line><span class=cl>    rm -rf <span class=nv>$BUILD</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    <span class=c1># Now we build OpenCV with macosx sdk.</span>
</span></span><span class=line><span class=cl>    <span class=c1># This will build opencv INSTALL target, which will</span>
</span></span><span class=line><span class=cl>    <span class=c1># copy headers to the $BUILD/include directory.</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Installing OpenCV headers&#34;</span>
</span></span><span class=line><span class=cl>    mkdir -p <span class=nv>$MAC_BUILD_DIR</span>
</span></span><span class=line><span class=cl>    <span class=nb>cd</span> <span class=nv>$MAC_BUILD_DIR</span>
</span></span><span class=line><span class=cl>    cmake -DCMAKE_INSTALL_PREFIX<span class=o>=</span><span class=nv>$MAC_INSTALL_DIR</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DENABLE_SSE<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DENABLE_SSE2<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_TESTS<span class=o>=</span>OFF <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_EXAMPLES<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_NEW_PYTHON_SUPPORT<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_EIGEN2<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_PVAPI<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_OPENEXR<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_QT<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_QUICKTIME<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DOPENCV_BUILD_3RDPARTY_LIBS<span class=o>=</span>YES <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -G Xcode <span class=nv>$SRC</span> &gt; /dev/null
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    mkdir <span class=nv>$BUILD</span>/include
</span></span><span class=line><span class=cl>    xcodebuild -sdk macosx -configuration Release -parallelizeTargets -target install &gt; /dev/null
</span></span><span class=line><span class=cl>    mv <span class=nv>$MAC_INSTALL_DIR</span>/include/* <span class=nv>$BUILD</span>/include
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    <span class=c1># We have to patch OpenCV source to exclude several modules form build</span>
</span></span><span class=line><span class=cl>    <span class=c1># because they prevent building other libs.</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Patching OpenCV sources&#34;</span>
</span></span><span class=line><span class=cl>    mkdir -p <span class=nv>$PATCHED_SRC_DIR</span>
</span></span><span class=line><span class=cl>    cp -R <span class=nv>$SRC</span>/ <span class=nv>$PATCHED_SRC_DIR</span>
</span></span><span class=line><span class=cl>    sed <span class=s1>&#39;/add_subdirectory(ts)/d&#39;</span> <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt      &gt; <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt.patched
</span></span><span class=line><span class=cl>    mv <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt.patched                           <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt
</span></span><span class=line><span class=cl>    sed <span class=s1>&#39;/add_subdirectory(highgui)/d&#39;</span> <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt &gt; <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt.patched
</span></span><span class=line><span class=cl>    mv <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt.patched                           <span class=nv>$PATCHED_SRC_DIR</span>/modules/CMakeLists.txt
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    <span class=c1># Configure OpenCV</span>
</span></span><span class=line><span class=cl>    mkdir -p <span class=nv>$IOS_BUILD_DIR</span>
</span></span><span class=line><span class=cl>    <span class=nb>cd</span> <span class=nv>$IOS_BUILD_DIR</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    cmake -DCMAKE_INSTALL_PREFIX<span class=o>=</span><span class=nv>$IOS_INSTALL_DIR</span> <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DENABLE_SSE<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DENABLE_SSE2<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_TESTS<span class=o>=</span>OFF <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_SHARED_LIBS<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_NEW_PYTHON_SUPPORT<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DBUILD_EXAMPLES<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_EIGEN2<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_PVAPI<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_OPENEXR<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_QT<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DWITH_QUICKTIME<span class=o>=</span>NO <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -DOPENCV_BUILD_3RDPARTY_LIBS<span class=o>=</span>YES <span class=se>\
</span></span></span><span class=line><span class=cl><span class=se></span>    -G Xcode <span class=nv>$PATCHED_SRC_DIR</span> &gt; /dev/null
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=c1>################################################################################</span>
</span></span><span class=line><span class=cl>    <span class=c1># Build for device armv6 architecture :</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Building iphone release armv6 configuration&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> target in <span class=si>${</span><span class=nv>OPENCV_MODULES_TO_BUILD</span><span class=p>[*]</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\tbuilding &#34;</span> <span class=nv>$target</span>
</span></span><span class=line><span class=cl>    xcodebuild -sdk iphoneos -configuration Release -parallelizeTargets <span class=nv>ARCHS</span><span class=o>=</span><span class=s2>&#34;armv6&#34;</span> -target <span class=nv>$target</span> &gt; /dev/null
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    mkdir -p <span class=nv>$BUILD</span>/lib/release-iphoneos-armv6
</span></span><span class=line><span class=cl>    mv <span class=nv>$IOS_BUILD_DIR</span>/lib/Release/*.a          <span class=nv>$BUILD</span>/lib/release-iphoneos-armv6 &gt; /dev/null
</span></span><span class=line><span class=cl>    mv <span class=nv>$IOS_BUILD_DIR</span>/3rdparty/lib/Release/*.a <span class=nv>$BUILD</span>/lib/release-iphoneos-armv6 &gt; /dev/null
</span></span><span class=line><span class=cl>    
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;Building iphone debug armv6 configuration&#34;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> target in <span class=si>${</span><span class=nv>OPENCV_MODULES_TO_BUILD</span><span class=p>[*]</span><span class=si>}</span>
</span></span><span class=line><span class=cl>    <span class=k>do</span>
</span></span><span class=line><span class=cl>    <span class=nb>echo</span> <span class=s2>&#34;\tbuilding &#34;</span> <span class=nv>$target</span>
</span></span><span class=line><span class=cl>    xcodebuild -sdk iphoneos -configuration Debug -parallelizeTargets   <span class=nv>ARCHS</span><span class=o>=</span><span class=s2>&#34;armv6&#34;</span> -target <span class=nv>$target</span> &gt; /dev/null
</span></span><span class=line><span class=cl>    <span class=k>done</span>
</span></span></code></pre></div></div><div class=post__footer><span><a class=tag href=/tags/tutorials/>tutorials</a><a class=tag href=/tags/opencv/>opencv</a><a class=tag href=/tags/xcode/>xcode</a></span></div><div id=comment><h2>comments</h2><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//cvtalks.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div></main></div><footer class="footer footer__base"><ul class=footer__list><li class=footer__item>&copy;
Eugene Khvedchenya
2022</li></ul></footer><script type=text/javascript src=/js/medium-zoom.min.9c062c557275acbaba71f0c7cd4024da3e3cc825d248bc4b2130811b0965330b.js integrity="sha256-nAYsVXJ1rLq6cfDHzUAk2j48yCXSSLxLITCBGwllMws=" crossorigin=anonymous></script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-10687369-5","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></body></html>